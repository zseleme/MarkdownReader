<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
</head>
<body>
    <h1>DOMPurify Test</h1>
    <div id="result"></div>

    <script>
        window.addEventListener('load', function() {
            const result = document.getElementById('result');

            if (typeof DOMPurify !== 'undefined') {
                result.innerHTML = '<p style="color: green;">✓ DOMPurify loaded successfully!</p>';
                console.log('DOMPurify version:', DOMPurify.version);

                // Test sanitization
                const dirty = '<img src=x onerror="alert(1)">';
                const clean = DOMPurify.sanitize(dirty);
                result.innerHTML += '<p>Test: ' + clean + '</p>';
                result.innerHTML += '<p>Expected: &lt;img src="x"&gt;</p>';
            } else {
                result.innerHTML = '<p style="color: red;">✗ DOMPurify NOT loaded!</p>';
            }
        });
    </script>
</body>
</html>
